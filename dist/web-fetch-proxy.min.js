/*!
 * web-fetch-proxy.js - 1.0.0 - 2023-08-16
 * 
 * Copyright (c) 2023 txiejun;
 * Licensed under the MIT license
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).webFetchProxy=t()}(this,(function(){"use strict";var e,t=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports=function(e){throw new TypeError('"'+e+'" is read-only')},e.exports.__esModule=!0,e.exports.default=e.exports})),n=(e=t)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;function o(e,t){this._resolve=e,this._reject=t}function r(e){function t(e,t){o.call(this,e,t)}return t.prototype=Object.create(o.prototype),t.prototype.next=e,t}return o.prototype=Object.create({resolve:function(e){this._resolve&&this._resolve(e.response)},reject:function(e){this._reject&&this._reject(e.error)}}),function(e,t){return function(e,t){var o=e.onRequest,i=e.onResponse,c=e.onError,s=t.fetch;return s?(t.fetch=function(e,t){var n=this,u={url:e,init:t};return new Promise((function(e,t){var f=r((function(e){h(e=e||u)})),l=r((function(e){this.resolve(e)})),p=r((function(e){this.reject(e)})),h=function(o){s.apply(n,[o.url,o.init]).then((function(n){var r=new l(e,t),c={config:o,response:n};if(!i)return r.resolve(c);i(c,r)})).catch((function(n){var r=new p(e,t),i={config:o,error:n};c?c(i,r):r.next(i)}))};o?o(u,new f(e,t)):h(u)}))},{originalFetch:s,unProxy:function(){t.fetch=s,n("originalFetch")}}):(console.error("fetch is null"),{})}(e,t=t||window)}}));
//# sourceMappingURL=web-fetch-proxy.min.js.map
